!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("bpdLogger",[],n):"object"==typeof exports?exports.bpdLogger=n():e.bpdLogger=n()}(this,(function(){return(()=>{"use strict";var e={d:(n,o)=>{for(var r in o)e.o(o,r)&&!e.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:o[r]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},n={};e.r(n),e.d(n,{ConsoleLoggerReporter:()=>g,PROPERTIES:()=>r,getLogger:()=>l,getSetupBuilder:()=>f,matchesLevel:()=>t,parseLogProperty:()=>a});var o=function(e,n,o,r){return new(o||(o=Promise))((function(t,i){function c(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var n;e.done?t(e.value):(n=e.value,n instanceof o?n:new o((function(e){e(n)}))).then(c,u)}s((r=r.apply(e,n||[])).next())}))};const r={MESSAGE:"message",ID:"id",MODULE:"module",METHOD:"method",PERFORFMANCE:"performance"};function t(e,n){if(e===n)return!0;if("debug"===n)return!0;if("none"===n)return!1;return d.findIndex(n=>n===e)<=d.findIndex(e=>e===n)}function i(e,n){return[...e,...n]}function c(e){return e||[]}function u(e){return o(this,void 0,void 0,(function*(){return"function"==typeof e?function(e){return o(this,void 0,void 0,(function*(){const n=performance.now(),o=e();return[performance.now()-n,o]}))}(e):e instanceof Promise?function(e){return o(this,void 0,void 0,(function*(){const n=performance.now(),o=yield e;return[performance.now()-n,o]}))}(e):[0,e]}))}function s(e,n,o){return Object.assign(Object.assign({},e),{[n]:o})}function a(e){return"function"==typeof e?e():e}function f(e,n,o){return{withLevel:o=>f(Object.assign({},e),n,o),withReporters:(...r)=>{const t=i(c(e.reporters),r);return f(s(e,"reporters",t),n,o)},withExtensions:(...r)=>{const t=i(c(e.extensions),r);return f(s(e,"extensions",t),n,o)},clearReporters:()=>f(s(e,"reporters",[]),n,o),clearExtensions:()=>f(s(e,"extensions",[]),n,o),save:()=>l(e,n,o)}}function l(e,n,i){const c={id:e=>c.prop(r.ID,e),module:e=>c.prop(r.MODULE,e),method:e=>c.prop(r.METHOD,e),prop:(o,r)=>l(Object.assign({},e),function(e,o){const r=new Map(n);return r.set(e,o),r}(o,r),i),configure:o=>f(Object.assign(Object.assign({},e),o),new Map(n),i),debug:e=>o(this,void 0,void 0,(function*(){return c.log("debug",e)})),warn:e=>o(this,void 0,void 0,(function*(){return c.log("warn",e)})),info:e=>o(this,void 0,void 0,(function*(){return c.log("info",e)})),error:e=>o(this,void 0,void 0,(function*(){return c.log("error",e)})),exception:e=>o(this,void 0,void 0,(function*(){return c.log("exception",()=>"string"==typeof e?e:`[${e.name}] ${e.message}`,e)})),measure:(e,t)=>o(this,void 0,void 0,(function*(){var o,i;try{const[s,a]=yield u(e),f=s.toFixed(null!==(o=null==t?void 0:t.fraction)&&void 0!==o?o:4);n.set(r.PERFORFMANCE,f);if(yield c.log("debug",`${null!==(i=null==t?void 0:t.label)&&void 0!==i?i:"Performance"}: ${f}`))return a}catch(e){if(yield c.exception(e),!0===(null==t?void 0:t.rethrow))throw e}return null})),log:(c,u,s)=>o(this,void 0,void 0,(function*(){if(!d.includes(c)||!t(c,i))return!1;const a=new Map(n);return u&&a.set(r.MESSAGE,u),function(e,n){n&&n.forEach(n=>e.set(...n()))}(a,e.extensions),function(e,n,r,t){return o(this,void 0,void 0,(function*(){if(!r)return!1;try{const o=new Date;yield Promise.all(r.map(r=>r({props:n,timestamp:o,level:e,error:t})))}catch(e){return console.error(e),!1}return!0}))}(c,a,e.reporters,s)}))};return c}const d=["none","exception","error","warn","info","debug"];l({reporters:[],extensions:[]},new Map,"none");var p=function(e,n,o,r){return new(o||(o=Promise))((function(t,i){function c(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var n;e.done?t(e.value):(n=e.value,n instanceof o?n:new o((function(e){e(n)}))).then(c,u)}s((r=r.apply(e,n||[])).next())}))};function v(e,n){var o,r,t;return function(e,n,o){return`${n}${e.join(o+n)}${o}`}((o=e,r=n.props,t=n.placeholder,r.map(e=>{var n;let r=t;switch(e){case"date":r=o.timestamp.toLocaleString();break;case"level":r=o.level;default:o.props.has(e)&&(r=null!==(n=a(o.props.get(e)))&&void 0!==n?n:t)}return r})),n.separator[0],n.separator[1])}const g=function(e){var n,o;const r=Object.assign(Object.assign({},e),{separator:null!==(n=e.separator)&&void 0!==n?n:["[","]"],placeholder:null!==(o=e.placeholder)&&void 0!==o?o:"-"});return e=>p(this,void 0,void 0,(function*(){const n=v(e,r);switch(e.level){case"error":case"exception":console.error(n);break;case"warn":console.warn(n);break;case"info":console.info(n);break;case"debug":console.debug(n);break;default:console.log(n)}return e.error&&!0===r.printStack&&console.error(e.error),!0}))};return n})()}));
//# sourceMappingURL=logger.min.js.map